const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/appointments-Dd2JugED.js","assets/dashboards-BzIxZDf7.js","assets/vendor-BLPh2XG4.js","assets/ui-Dc2VBgM7.js","assets/supabase-wzm6nDUs.js","assets/reviews-DPhkt9BG.js"])))=>i.map(i=>d[i]);
import{u as e,j as s,C as t,B as n,_ as a,M as i,I as r,s as l}from"./dashboards-BzIxZDf7.js";import{h as o,u as d,r as c,R as m}from"./vendor-BLPh2XG4.js";import{L as x,M as u,c as h,H as p,J as b,K as j,l as v,a as g,N as f,h as N,i as w,u as y}from"./ui-Dc2VBgM7.js";import"./supabase-wzm6nDUs.js";const _=[{value:"Kapper",label:"Kapsalon",icon:"ðŸ’‡"},{value:"Nagels",label:"Nagelsalon",icon:"ðŸ’…"},{value:"Wimpers",label:"Wimper & Brow Studio",icon:"ðŸ‘ï¸"},{value:"Massage",label:"Massagesalon",icon:"ðŸ’†"},{value:"Gezichtsbehandeling",label:"Gezichtssalon",icon:"âœ¨"},{value:"Huidverzorging",label:"Huidverzorging",icon:"ðŸ§´"},{value:"Make-up",label:"Make-up Salon",icon:"ðŸ’„"},{value:"Overig",label:"Overig",icon:"ðŸª"}];class k extends m.Component{constructor(e){super(e),this.state={error:void 0}}componentDidCatch(e,s){this.setState({error:e})}render(){var e;return this.state.error?s.jsx("div",{className:"min-h-screen flex items-center justify-center p-8 bg-red-50 text-red-800",children:s.jsxs("div",{children:[s.jsx("h2",{className:"font-bold mb-2",children:"Er is iets misgegaan"}),s.jsx("pre",{className:"text-xs whitespace-pre-wrap",children:(null==(e=this.state.error)?void 0:e.message)||String(this.state.error)})]})}):this.props.children}}const S=({subdomain:m})=>{var S,z,C,M;const{id:D}=o(),I=d(),{user:B}=e(),H=m||D,[L,A]=c.useState(null),[E,O]=c.useState(!0),[V,q]=c.useState(!1),[R,W]=c.useState(null),[$,T]=c.useState("service"),[F,Y]=c.useState([]),[G,J]=c.useState([]),[K,P]=c.useState(!1),[Z,U]=c.useState({name:"",rating:0,text:""}),[Q,X]=c.useState(0),[ee,se]=c.useState(!1),[te,ne]=c.useState(new Date),[ae,ie]=c.useState(null),[re,le]=c.useState(null),[oe,de]=c.useState(null),ce=(null==(S=null==L?void 0:L.services)?void 0:S.find(e=>e.id===R))||null,me=e=>e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0"),xe=c.useMemo(()=>{const e=[];for(let s=9;s<18;s++)for(let t=0;t<60;t+=5)17===s&&t>55||e.push(`${String(s).padStart(2,"0")}:${String(t).padStart(2,"0")}`);return e},[]),ue=c.useMemo(()=>{if(!ae||!ce)return[];let e=[];if(null==L?void 0:L.openingHours){const s=["zo","ma","di","wo","do","vr","za"][ae.getDay()],t=L.openingHours[s];if(t&&!t.closed){const s=[],[n,a]=t.start.split(":").map(Number),[i,r]=t.end.split(":").map(Number);let l=n,o=a;for(;l<i||l===i&&o<r;){const e=`${String(l).padStart(2,"0")}:${String(o).padStart(2,"0")}`;s.push(e),o+=5,o>=60&&(o%=60,l+=1)}e=s}}else e=xe;const s=me(ae),t=(null==ce?void 0:ce.durationMinutes)??30,n=F.filter(e=>e.date===s),a=e=>{if(!e||"string"!=typeof e)return-1;const s=e.split(":").map(Number);if(s.length<2||s.some(isNaN))return-1;const[t,n]=s;return 60*t+n};return e.filter(e=>{const s=a(e);if(s<0)return!1;const i=(null==L?void 0:L.openingHours)?(()=>{const e=["zo","ma","di","wo","do","vr","za"][ae.getDay()],s=L.openingHours[e];if(s&&!s.closed){const[e,t]=s.end.split(":").map(Number);return 60*e+t}return 1080})():1080;return!(s+t>i)&&!((e,s)=>{const t=a(e);if(t<0)return!0;const i=t+s;return n.some(e=>{const s=a(e.time);if(s<0)return!1;const n=s+(e.duration_minutes||30);return t<n&&i>s})})(e,t)})},[ae,ce,F,null==L?void 0:L.openingHours]);if(c.useEffect(()=>{(async()=>{if(H)try{O(!0);let{data:s,error:t}=await l.from("salons").select("\n                        *,\n                        services(*),\n                        opening_hours\n                    ").eq("slug",H).maybeSingle();if(!s&&!t){const e=await l.from("salons").select("\n                            *,\n                            services(*),\n                            opening_hours\n                        ").eq("id",H).maybeSingle();s=e.data,t=e.error}if(t||!s)return void O(!1);if(A({id:s.slug||s.id,supabaseId:s.id,name:s.name,zipCode:s.zip_code||s.zipCode||"",city:s.city||"",address:s.address||"",description:s.description||"Welkom bij onze salon!",categories:s.categories||[],rating:4.5,reviewCount:0,email:s.email,phone:s.phone,paymentMethods:s.payment_methods||{cash:!0,online:!1},services:(s.services||[]).map(e=>({id:e.id,name:e.name,description:e.description||"",price:e.price,durationMinutes:e.duration_minutes,category:e.category||"Overig"})),image:s.image_url||"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=800",openingHours:s.opening_hours}),B){const{data:e}=await l.from("favorites").select("id").eq("user_id",B.id).eq("salon_id",s.id).maybeSingle();se(!!e)}const{data:n}=await l.from("appointments").select("date, time, duration_minutes").eq("salon_id",s.id).neq("status","cancelled");n&&Y(n.map(e=>({date:e.date,time:e.time,duration_minutes:e.duration_minutes||30})));try{const{data:e}=await l.from("reviews").select("*, profiles:user_id (full_name)").eq("salon_id",s.id).eq("is_approved",!0).order("created_at",{ascending:!1});e&&J(e.map(e=>{var s;return{id:e.id,user:(null==(s=e.profiles)?void 0:s.full_name)||"Anoniem",rating:e.rating,text:e.comment||e.text||"",date:new Date(e.created_at).toLocaleDateString("nl-NL")}}))}catch(e){}}catch(s){}finally{O(!1)}else O(!1)})()},[H,B]),c.useEffect(()=>{ae&&(null==L?void 0:L.openingHours)&&!ve(ae)&&(ie(null),le(null))},[null==L?void 0:L.openingHours,ae]),E)return s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(x,{className:"animate-spin text-brand-500",size:32})});if(!L)return s.jsx("div",{className:"p-8 text-center",children:"Salon niet gevonden"});const he=()=>{setTimeout(()=>{var e;null==(e=document.getElementById("booking-widget"))||e.scrollIntoView({behavior:"smooth"})},100)},pe=e=>{const s=new Date(te.setMonth(te.getMonth()+e));ne(new Date(s))},be=e=>{const s=new Date;return s.setHours(0,0,0,0),e<s},je=e=>{if(!(null==L?void 0:L.openingHours))return!0;const s=["zo","ma","di","wo","do","vr","za"][e.getDay()],t=L.openingHours[s];return t&&!t.closed},ve=e=>!be(e)&&je(e);return s.jsxs(k,{children:[s.jsxs("div",{className:"bg-stone-50 min-h-screen pb-12",children:[s.jsxs("div",{className:"h-64 md:h-80 w-full overflow-hidden relative",children:[s.jsx("img",{src:L.image,alt:L.name,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"}),s.jsxs("div",{className:"absolute bottom-0 left-0 p-6 md:p-12 text-white container mx-auto flex justify-between items-end",children:[s.jsxs("div",{className:"max-w-[80%]",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold",children:L.name}),s.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[s.jsxs("span",{className:"flex items-center text-sm md:text-base",children:[s.jsx(u,{size:16,className:"mr-1"})," ",L.city]}),s.jsxs("span",{className:"flex items-center text-sm md:text-base",children:[s.jsx(h,{size:16,className:"mr-1 fill-yellow-400 text-yellow-400"})," ",L.rating," (",L.reviewCount,")"]}),L.categories&&L.categories.length>0&&s.jsx("div",{className:"flex items-center gap-1 text-sm md:text-base",children:_.filter(e=>L.categories.includes(e.value)).map(e=>s.jsxs("span",{className:"flex items-center bg-white/20 backdrop-blur-sm rounded-full px-3 py-1",children:[s.jsx("span",{className:"mr-1",children:e.icon}),e.label]},e.value))})]})]}),s.jsx("button",{onClick:async()=>{if(L&&B)try{ee?await l.from("favorites").delete().eq("user_id",B.id).eq("salon_id",L.id):await l.from("favorites").insert({user_id:B.id,salon_id:L.id}),se(!ee)}catch(e){}else alert("Log in om salons toe te voegen aan je favorieten")},className:"p-3 rounded-full backdrop-blur-md transition-all hover:scale-105 shadow-lg "+(ee?"bg-white text-red-500":"bg-white/20 text-white hover:bg-white/30"),title:ee?"Verwijder uit favorieten":"Voeg toe aan favorieten",children:s.jsx(p,{size:20,className:ee?"fill-red-500":""})})]})]}),s.jsxs("div",{className:"container mx-auto px-4 -mt-8 relative z-10 grid md:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"md:col-span-2 space-y-8",children:[s.jsxs(t,{className:"p-8",children:[s.jsx("div",{className:"flex justify-between items-start mb-4",children:s.jsxs("h2",{className:"text-xl font-bold",children:["Over ",L.name]})}),s.jsx("p",{className:"text-stone-600 leading-relaxed mb-6",children:L.description}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-6",children:[L.phone&&s.jsxs("a",{href:`tel:${L.phone}`,className:"flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border border-stone-200 text-stone-700 font-medium hover:bg-stone-50 hover:text-stone-900 transition-colors",children:[s.jsx(b,{size:18}),"Bellen"]}),L.phone&&s.jsxs("a",{href:(e=>{if(!e)return"#";let s=e.replace(/\D/g,"");return s.startsWith("0")&&(s="31"+s.substring(1)),`https://wa.me/${s}`})(L.phone),target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border border-green-200 text-green-700 bg-green-50 font-medium hover:bg-green-100 transition-colors",children:[s.jsx(j,{size:18}),"WhatsApp"]}),L.email&&s.jsxs("a",{href:`mailto:${L.email}`,className:"flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border border-stone-200 text-stone-700 font-medium hover:bg-stone-50 hover:text-stone-900 transition-colors",children:[s.jsx(v,{size:18}),"Mailen"]})]}),s.jsxs("div",{className:"pt-6 border-t border-stone-100 grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-stone-900 mb-2",children:"Adres"}),s.jsxs("p",{className:"text-stone-500",children:[L.address,s.jsx("br",{}),L.zipCode," ",L.city]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-stone-900 mb-3 flex items-center",children:[s.jsx(g,{className:"mr-2",size:16}),"Openingstijden"]}),s.jsx("div",{className:"space-y-2",children:(()=>{const e=L.openingHours||{},t=["Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag","Zondag"];return["ma","di","wo","do","vr","za","zo"].map((n,a)=>{const i=e[n],r=null==i?void 0:i.closed;return s.jsxs("div",{className:"flex justify-between items-center py-1",children:[s.jsx("span",{className:"text-sm font-medium "+(r?"text-stone-400":"text-stone-700"),children:t[a]}),s.jsx("span",{className:"text-sm "+(r?"text-stone-400 italic":"text-stone-600"),children:r?"Gesloten":`${(null==i?void 0:i.start)||"09:00"} - ${(null==i?void 0:i.end)||"18:00"}`})]},n)})})()})]})]})]}),s.jsx("div",{id:"services-list",children:(()=>{const e=L.services.reduce((e,s)=>{const t=s.category;return e[t]||(e[t]=[]),e[t].push(s),e},{});return Object.entries(e).map(([e,a])=>s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-xl font-bold mb-4 px-2",children:e}),s.jsx("div",{className:"space-y-4",children:a.map(e=>s.jsxs(t,{className:"p-4 md:p-6 flex justify-between items-center hover:border-brand-200 transition-colors",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-stone-900 text-lg",children:e.name}),s.jsx("p",{className:"text-sm text-stone-500 mb-2",children:e.description}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-stone-500",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(g,{size:14,className:"mr-1"})," ",e.durationMinutes," min"]}),s.jsxs("span",{className:"flex items-center font-medium text-stone-900",children:[s.jsx(f,{size:14,className:"mr-1"})," ",e.price]})]})]}),s.jsx(n,{onClick:()=>{return s=e.id,W(s),T("time"),void he();var s},variant:R===e.id?"primary":"outline",children:"Boeken"})]},e.id))})]},e))})()}),s.jsxs(t,{className:"p-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-xl font-bold",children:["Reviews (",G.length,")"]}),s.jsx(n,{variant:"secondary",size:"sm",onClick:()=>{const e=localStorage.getItem("currentUser"),s=e?JSON.parse(e):null;U({name:(null==s?void 0:s.name)||"",rating:0,text:""}),P(!0)},children:"Schrijf een review"})]}),s.jsx("div",{className:"space-y-6",children:0===G.length?s.jsx("div",{className:"text-stone-500 text-sm",children:"Nog geen reviews. Wees de eerste!"}):G.map(e=>s.jsxs("div",{className:"border-b border-stone-100 last:border-0 pb-6 last:pb-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"font-semibold",children:e.user}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((t,n)=>s.jsx(h,{size:14,className:n<e.rating?"fill-current":"text-stone-200"},n))}),s.jsx("button",{onClick:()=>(async e=>{if(B)try{const{error:s}=await l.from("reviews").update({is_flagged:!0,flagged_reason:"Gerapporteerd door gebruiker"}).eq("id",e);if(s)throw s;alert("Review gerapporteerd. Een moderator zal deze beoordelen.")}catch(s){alert("Er ging iets mis bij het rapporteren.")}else alert("Log in om een review te rapporteren.")})(e.id),className:"text-xs text-stone-400 hover:text-red-500 transition-colors",title:"Review rapporteren",children:"ðŸš©"})]})]}),s.jsxs("p",{className:"text-stone-600 text-sm",children:['"',e.text,'"']})]},e.id))})]})]}),s.jsx("div",{className:"relative",children:s.jsxs("div",{className:"sticky top-24",id:"booking-widget",children:[s.jsxs(t,{className:"p-6 border-brand-100 shadow-lg transition-all duration-300",children:[s.jsx("h3",{className:"text-lg font-bold mb-4 border-b border-stone-100 pb-2",children:"Je afspraak"}),"service"===$&&s.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("h4",{className:"font-semibold text-stone-900 mb-2",children:"Kies een dienst"}),s.jsx("p",{className:"text-sm text-stone-500",children:"Alle beschikbare diensten"})]}),s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:null==(z=null==L?void 0:L.services)?void 0:z.map(e=>s.jsx("button",{onClick:()=>{W(e.id),T("time"),he()},className:"w-full p-4 border-2 border-stone-200 rounded-xl hover:border-brand-300 hover:bg-brand-50 transition-colors text-left",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-stone-900",children:e.name}),s.jsxs("p",{className:"text-sm text-stone-500 mt-1 flex items-center",children:[s.jsx(g,{size:12,className:"mr-1"})," ",e.durationMinutes," min"]})]}),s.jsxs("span",{className:"font-bold text-stone-700",children:["â‚¬",e.price]})]})},e.id))})]}),"time"===$&&R&&s.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[s.jsxs("div",{className:"bg-stone-50 p-4 rounded-xl border border-stone-200 flex justify-between items-start animate-fadeIn",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-stone-900",children:null==ce?void 0:ce.name}),s.jsxs("p",{className:"text-xs text-stone-500 mt-1",children:[null==ce?void 0:ce.durationMinutes," min"]})]}),s.jsxs("span",{className:"font-bold text-stone-700",children:["â‚¬",null==ce?void 0:ce.price]})]}),R&&"time"===$&&s.jsxs("div",{className:"animate-fadeIn",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("button",{onClick:()=>pe(-1),className:"p-1 hover:bg-stone-100 rounded-full",children:s.jsx(N,{size:20})}),s.jsx("span",{className:"font-semibold text-stone-800 capitalize",children:te.toLocaleString("nl-NL",{month:"long",year:"numeric"})}),s.jsx("button",{onClick:()=>pe(1),className:"p-1 hover:bg-stone-100 rounded-full",children:s.jsx(w,{size:20})})]}),s.jsxs("div",{className:"grid grid-cols-7 text-center text-xs text-stone-400 font-medium mb-2",children:[s.jsx("div",{children:"Ma"}),s.jsx("div",{children:"Di"}),s.jsx("div",{children:"Wo"}),s.jsx("div",{children:"Do"}),s.jsx("div",{children:"Vr"}),s.jsx("div",{children:"Za"}),s.jsx("div",{children:"Zo"})]}),s.jsxs("div",{className:"grid grid-cols-7 gap-1 mb-6",children:[[...Array((e=>{let s=new Date(e.getFullYear(),e.getMonth(),1).getDay();return 0===s?6:s-1})(te))].map((e,t)=>s.jsx("div",{className:"h-9"},`empty-${t}`)),[...Array((ge=te,new Date(ge.getFullYear(),ge.getMonth()+1,0).getDate()))].map((e,t)=>{const n=t+1,a=new Date(te.getFullYear(),te.getMonth(),n),i=ae&&(l=a,(r=ae).getDate()===l.getDate()&&r.getMonth()===l.getMonth()&&r.getFullYear()===l.getFullYear());var r,l;const o=be(a),d=!je(a),c=o||d;return s.jsx("button",{disabled:c,onClick:()=>{ie(a),le(null)},className:"h-9 w-9 rounded-full flex items-center justify-center text-sm transition-all "+(i?"bg-brand-500 text-white font-bold shadow-md":c?"text-stone-300 cursor-not-allowed":"text-stone-700 hover:bg-brand-50 hover:text-brand-600"),children:n},n)})]}),ae&&s.jsxs("div",{className:"border-t border-stone-100 pt-4 animate-fadeIn",children:[s.jsx("p",{className:"text-sm font-medium text-stone-700 mb-3",children:"Tijdstip:"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:ue.map(e=>s.jsx("button",{onClick:()=>le(e),className:"py-2 text-sm rounded-lg border transition-colors "+(re===e?"bg-brand-400 text-white border-brand-400 font-medium":"border-stone-200 text-stone-600 hover:border-brand-300 hover:bg-brand-50"),children:e},e))})]}),s.jsx(n,{className:"w-full mt-6",onClick:()=>T("payment"),disabled:!ae||!re,children:"Verder naar betaling"})]})]})]}),"payment"===$&&R&&s.jsxs(t,{className:"p-6 border-brand-100 shadow-lg transition-all duration-300 mt-4",children:[s.jsx("h3",{className:"text-lg font-bold mb-4 border-b border-stone-100 pb-2",children:"Betaalmethode kiezen"}),s.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[s.jsx("p",{className:"text-stone-600 text-sm",children:"Kies hoe je wilt betalen voor je afspraak."}),s.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[(null==(C=null==L?void 0:L.paymentMethods)?void 0:C.cash)&&s.jsx("button",{onClick:()=>de("cash"),className:"p-4 border-2 rounded-xl text-left transition-all duration-200 "+("cash"===oe?"border-brand-500 bg-brand-50 text-brand-700":"border-stone-200 hover:border-stone-300 bg-white"),children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-4 h-4 rounded-full border-2 flex items-center justify-center "+("cash"===oe?"border-brand-500":"border-stone-300"),children:"cash"===oe&&s.jsx("div",{className:"w-2 h-2 bg-brand-500 rounded-full"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Contant betalen"}),s.jsx("div",{className:"text-sm text-stone-500",children:"Betaal ter plekke bij aankomst"})]})]})}),(null==(M=null==L?void 0:L.paymentMethods)?void 0:M.online)&&s.jsx("button",{onClick:()=>de("online"),className:"p-4 border-2 rounded-xl text-left transition-all duration-200 "+("online"===oe?"border-brand-500 bg-brand-50 text-brand-700":"border-stone-200 hover:border-stone-300 bg-white"),children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-4 h-4 rounded-full border-2 flex items-center justify-center "+("online"===oe?"border-brand-500":"border-stone-300"),children:"online"===oe&&s.jsx("div",{className:"w-2 h-2 bg-brand-500 rounded-full"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Online betalen"}),s.jsx("div",{className:"text-sm text-stone-500",children:"Veilig betalen met creditcard"})]})]})})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsxs(n,{variant:"outline",onClick:()=>T("time"),className:"flex-1",children:[s.jsx(N,{className:"w-4 h-4 mr-2"}),"Terug"]}),s.jsx(n,{className:"flex-1",onClick:()=>T("confirm"),disabled:!oe,children:"Verder naar bevestiging"})]})]})]}),"confirm"===$&&R&&s.jsxs(t,{className:"p-6 border-brand-100 shadow-lg transition-all duration-300 mt-4",children:[s.jsx("h3",{className:"text-lg font-bold mb-4 border-b border-stone-100 pb-2",children:"Bevestig je afspraak"}),s.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[s.jsxs("div",{className:"p-4 bg-stone-50 rounded-xl space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-stone-500",children:"Behandeling"}),s.jsx("span",{className:"font-medium text-stone-900",children:null==ce?void 0:ce.name})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-stone-500",children:"Datum"}),s.jsx("span",{className:"font-medium text-stone-900",children:ae&&(e=>new Intl.DateTimeFormat("nl-NL",{weekday:"short",day:"numeric",month:"long"}).format(e))(ae)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-stone-500",children:"Tijd"}),s.jsx("span",{className:"font-medium text-stone-900",children:re})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-stone-500",children:"Betaalmethode"}),s.jsx("span",{className:"font-medium text-stone-900",children:"cash"===oe?"Contant":"Online"})]}),s.jsxs("div",{className:"border-t border-stone-200 pt-2 flex justify-between font-bold text-base",children:[s.jsx("span",{children:"Totaal"}),s.jsxs("span",{children:["â‚¬",null==ce?void 0:ce.price]})]})]}),s.jsx(n,{className:"w-full",onClick:async()=>{if(!B)return alert("Log eerst in om te boeken"),void I("/login");q(!0);try{const e=(null==ce?void 0:ce.durationMinutes)??30,s={user_id:(null==B?void 0:B.id)||null,salon_id:L.supabaseId,service_id:R,service_name:null==ce?void 0:ce.name,date:ae?me(ae):null,time:re,duration_minutes:e,price:null==ce?void 0:ce.price,status:"confirmed",payment_method:oe,payment_status:"pending"},{insertAppointmentSafe:t}=await a(async()=>{const{insertAppointmentSafe:e}=await import("./appointments-Dd2JugED.js");return{insertAppointmentSafe:e}},__vite__mapDeps([0,1,2,3,4])),{error:n}=await t(s);if(n)throw n;alert("Boeking succesvol!"),I("/dashboard/user")}catch(e){alert("Boeking mislukt: "+(e.message||"Onbekende fout"))}finally{q(!1)}},isLoading:V,children:"Bevestig Boeking"}),s.jsx("button",{className:"w-full text-center text-xs text-stone-400 hover:text-stone-600 underline",onClick:()=>{T("time")},children:"Wijzig datum of tijd"})]})]}),s.jsxs("div",{className:"mt-4 flex justify-center gap-4 text-xs text-stone-400",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(y,{size:12,className:"mr-1"})," Gratis annuleren"]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(y,{size:12,className:"mr-1"})," Betaal in salon"]})]})]})})]})]}),s.jsx(i,{isOpen:K,onClose:()=>P(!1),title:"Schrijf een review",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-sm text-stone-500 mb-4",children:["Wat vond je van je ervaring bij ",s.jsx("span",{className:"font-semibold text-stone-900",children:null==L?void 0:L.name}),"?"]}),s.jsx("div",{className:"flex justify-center gap-2 mb-4",children:[1,2,3,4,5].map(e=>s.jsx("button",{type:"button",className:"focus:outline-none transition-transform hover:scale-110",onClick:()=>U({...Z,rating:e}),onMouseEnter:()=>X(e),onMouseLeave:()=>X(0),children:s.jsx(h,{size:32,className:(e<=(Q||Z.rating)?"fill-yellow-400 text-yellow-400":"text-stone-300")+" transition-colors"})},e))}),s.jsx(r,{label:"Jouw naam",value:Z.name,onChange:e=>U({...Z,name:e.target.value}),placeholder:"Naam"}),s.jsxs("div",{className:"w-full",children:[s.jsx("label",{className:"mb-2 block text-sm font-medium text-stone-700",children:"Jouw ervaring"}),s.jsx("textarea",{className:"w-full rounded-xl border border-stone-200 bg-white px-3 py-2 text-sm focus:ring-2 focus:ring-brand-400 focus:outline-none min-h-[100px]",value:Z.text,onChange:e=>U({...Z,text:e.target.value}),placeholder:"Vertel ons wat je ervan vond..."})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[s.jsx(n,{variant:"outline",onClick:()=>P(!1),children:"Annuleren"}),s.jsx(n,{onClick:async()=>{if(0!==Z.rating)if(Z.name&&Z.text)if(B)try{const e={salon_id:L.supabaseId||L.id,user_id:B.id,rating:Z.rating,comment:Z.text,text:Z.text,is_approved:!0},{insertReviewSafe:s}=await a(async()=>{const{insertReviewSafe:e}=await import("./reviews-DPhkt9BG.js");return{insertReviewSafe:e}},__vite__mapDeps([5,1,2,3,4])),{error:t,data:n}=await s(e);if(t)return void alert("Er ging iets mis bij het opslaan van je review. Probeer het opnieuw.");const i={id:n.id,user:Z.name,text:Z.text,rating:Z.rating,created_at:n.created_at};J(e=>[i,...e]),P(!1),U({name:"",rating:0,text:""}),alert("Bedankt voor je review!")}catch(e){alert("Er ging iets mis. Probeer het opnieuw.")}else alert("Log in om een review te plaatsen.");else alert("Vul alstublieft alle velden in.");else alert("Selecteer alstublieft een aantal sterren.")},children:"Plaats Review"})]})]})})]});var ge};export{S as SalonDetailPage};
