const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/appointments-CxSzwn1D.js","assets/dashboards-BQYUHD6Z.js","assets/vendor-BLPh2XG4.js","assets/ui-Dc2VBgM7.js","assets/supabase-wzm6nDUs.js","assets/reviews-BR7FZGZe.js"])))=>i.map(i=>d[i]);
import{u as e,j as s,C as t,B as n,_ as a,M as i,I as r,s as l}from"./dashboards-BQYUHD6Z.js";import{u as o,h as d,r as c,R as m}from"./vendor-BLPh2XG4.js";import{L as x,M as u,c as h,H as p,J as g,K as b,l as f,a as v,N as j,h as N,i as w,u as y}from"./ui-Dc2VBgM7.js";import"./supabase-wzm6nDUs.js";const S=[{value:"Kapper",label:"Kapsalon",icon:"ðŸ’‡"},{value:"Nagels",label:"Nagelsalon",icon:"ðŸ’…"},{value:"Wimpers",label:"Wimper & Brow Studio",icon:"ðŸ‘ï¸"},{value:"Massage",label:"Massagesalon",icon:"ðŸ’†"},{value:"Gezichtsbehandeling",label:"Gezichtssalon",icon:"âœ¨"},{value:"Huidverzorging",label:"Huidverzorging",icon:"ðŸ§´"},{value:"Make-up",label:"Make-up Salon",icon:"ðŸ’„"},{value:"Overig",label:"Overig",icon:"ðŸª"}];class _ extends m.Component{constructor(e){super(e),this.state={error:void 0}}componentDidCatch(e,s){this.setState({error:e})}render(){var e;return this.state.error?s.jsx("div",{className:"min-h-screen flex items-center justify-center p-8 bg-red-50 text-red-800",children:s.jsxs("div",{children:[s.jsx("h2",{className:"font-bold mb-2",children:"Er is iets misgegaan"}),s.jsx("pre",{className:"text-xs whitespace-pre-wrap",children:(null==(e=this.state.error)?void 0:e.message)||String(this.state.error)})]})}):this.props.children}}const k=({subdomain:m})=>{var k,z,D,M;const C=o(),{id:H,subdomain:I}=d(),{user:T}=e(),B=m||I||H,[O,L]=c.useState(null),[A,E]=c.useState(!0),[$,V]=c.useState(!1),[q,F]=c.useState(null),[R,W]=c.useState("service"),[Y,J]=c.useState([]),[G,K]=c.useState([]),[P,Z]=c.useState(!1),[U,Q]=c.useState({name:"",rating:0,text:""}),[X,ee]=c.useState(0),[se,te]=c.useState(!1),[ne,ae]=c.useState(new Date),[ie,re]=c.useState(null),[le,oe]=c.useState(null),[de,ce]=c.useState(null),me=(null==(k=null==O?void 0:O.services)?void 0:k.find(e=>e.id===q))||null,xe=e=>e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0"),ue=c.useMemo(()=>{const e=[];for(let s=9;s<18;s++)for(let t=0;t<60;t+=5)17===s&&t>55||e.push(`${String(s).padStart(2,"0")}:${String(t).padStart(2,"0")}`);return e},[]),he=c.useMemo(()=>{if(!ie||!me)return[];let e=[];if(null==O?void 0:O.openingHours){const s=["zo","ma","di","wo","do","vr","za"][ie.getDay()],t=O.openingHours[s];if(t&&!t.closed){const s=[],[n,a]=t.start.split(":").map(Number),[i,r]=t.end.split(":").map(Number);let l=n,o=a;for(;l<i||l===i&&o<r;){const e=`${String(l).padStart(2,"0")}:${String(o).padStart(2,"0")}`;s.push(e),o+=5,o>=60&&(o%=60,l+=1)}e=s}}else e=ue;const s=xe(ie),t=(null==me?void 0:me.durationMinutes)??30,n=Y.filter(e=>e.date===s),a=e=>{if(!e||"string"!=typeof e)return-1;const s=e.split(":").map(Number);if(s.length<2||s.some(isNaN))return-1;const[t,n]=s;return 60*t+n};return e.filter(e=>{const s=a(e);if(s<0)return!1;const i=(null==O?void 0:O.openingHours)?(()=>{const e=["zo","ma","di","wo","do","vr","za"][ie.getDay()],s=O.openingHours[e];if(s&&!s.closed){const[e,t]=s.end.split(":").map(Number);return 60*e+t}return 1080})():1080;if(s+t>i)return!1;const r=Number((null==O?void 0:O.leadTimeHours)||0);if(r>0){const e=new Date((new Date).getTime()+60*r*60*1e3),t=new Date(ie.getFullYear(),ie.getMonth(),ie.getDate()),n=new Date(e.getFullYear(),e.getMonth(),e.getDate());if(t<n)return!1;if(t.getTime()===n.getTime()){if(s<60*e.getHours()+e.getMinutes())return!1}}return!((e,s)=>{const t=a(e);if(t<0)return!0;const i=t+s;return n.some(e=>{const s=a(e.time);if(s<0)return!1;const n=s+(e.duration_minutes||30);return t<n&&i>s})})(e,t)})},[ie,me,Y,null==O?void 0:O.openingHours]);if(c.useEffect(()=>{(async()=>{if(B)try{E(!0);let{data:s,error:t}=await l.from("salons").select("\n                        *,\n                        services(*),\n                        opening_hours\n                    ").eq("slug",B).maybeSingle();if(!s&&!t){const e=await l.from("salons").select("\n                            *,\n                            services(*),\n                            opening_hours\n                        ").eq("id",B).maybeSingle();s=e.data,t=e.error}if(t||!s)return void E(!1);if(L({id:s.slug||s.id,supabaseId:s.id,name:s.name,zipCode:s.zip_code||s.zipCode||"",city:s.city||"",address:s.address||"",description:s.description||"Welkom bij onze salon!",categories:s.categories||[],rating:4.5,reviewCount:0,email:s.email,phone:s.phone,paymentMethods:s.payment_methods||{cash:!0,online:!1},leadTimeHours:s.lead_time_hours||0,services:(s.services||[]).map(e=>({id:e.id,name:e.name,description:e.description||"",price:e.price,durationMinutes:e.duration_minutes,category:e.category||"Overig"})),image:s.image_url||"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=800",openingHours:s.opening_hours}),T){const{data:e}=await l.from("favorites").select("id").eq("user_id",T.id).eq("salon_id",s.id).maybeSingle();te(!!e)}const{data:n}=await l.from("appointments").select("date, time, duration_minutes").eq("salon_id",s.id).neq("status","cancelled");n&&J(n.map(e=>({date:e.date,time:e.time,duration_minutes:e.duration_minutes||30})));try{const{data:e}=await l.from("reviews").select("*, profiles:user_id (full_name)").eq("salon_id",s.id).eq("is_approved",!0).order("created_at",{ascending:!1});e&&K(e.map(e=>{var s;return{id:e.id,user:(null==(s=e.profiles)?void 0:s.full_name)||"Anoniem",rating:e.rating,text:e.comment||e.text||"",date:new Date(e.created_at).toLocaleDateString("nl-NL")}}))}catch(e){}}catch(s){}finally{E(!1)}else E(!1)})()},[B,T]),c.useEffect(()=>{ie&&(null==O?void 0:O.openingHours)&&!ve(ie)&&(re(null),oe(null))},[null==O?void 0:O.openingHours,ie]),A)return s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(x,{className:"animate-spin text-brand-500",size:32})});if(!O)return s.jsx("div",{className:"p-8 text-center",children:"Salon niet gevonden"});const pe=()=>{setTimeout(()=>{var e;null==(e=document.getElementById("booking-widget"))||e.scrollIntoView({behavior:"smooth"})},100)},ge=e=>{const s=new Date(ne.setMonth(ne.getMonth()+e));ae(new Date(s))},be=e=>{const s=new Date;return s.setHours(0,0,0,0),e<s},fe=e=>{if(!(null==O?void 0:O.openingHours))return!0;const s=["zo","ma","di","wo","do","vr","za"][e.getDay()],t=O.openingHours[s];return t&&!t.closed},ve=e=>!be(e)&&fe(e);return s.jsxs(_,{children:[s.jsxs("div",{className:"bg-stone-50 min-h-screen pb-12",children:[s.jsxs("div",{className:"h-64 md:h-80 w-full overflow-hidden relative",children:[s.jsx("img",{src:O.image,alt:O.name,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"}),s.jsxs("div",{className:"absolute bottom-0 left-0 p-6 md:p-12 text-white container mx-auto flex justify-between items-end",children:[s.jsxs("div",{className:"max-w-[80%]",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold",children:O.name}),s.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[s.jsxs("span",{className:"flex items-center text-sm md:text-base",children:[s.jsx(u,{size:16,className:"mr-1"})," ",O.city]}),s.jsxs("span",{className:"flex items-center text-sm md:text-base",children:[s.jsx(h,{size:16,className:"mr-1 fill-yellow-400 text-yellow-400"})," ",O.rating," (",O.reviewCount,")"]}),O.categories&&O.categories.length>0&&s.jsx("div",{className:"flex items-center gap-1 text-sm md:text-base",children:S.filter(e=>O.categories.includes(e.value)).map(e=>s.jsxs("span",{className:"flex items-center bg-white/20 backdrop-blur-sm rounded-full px-3 py-1",children:[s.jsx("span",{className:"mr-1",children:e.icon}),e.label]},e.value))})]})]}),s.jsx("button",{onClick:async()=>{if(O&&T)try{se?await l.from("favorites").delete().eq("user_id",T.id).eq("salon_id",O.id):await l.from("favorites").insert({user_id:T.id,salon_id:O.id}),te(!se)}catch(e){}else alert("Log in om salons toe te voegen aan je favorieten")},className:"p-3 rounded-full backdrop-blur-md transition-all hover:scale-105 shadow-lg "+(se?"bg-white text-red-500":"bg-white/20 text-white hover:bg-white/30"),title:se?"Verwijder uit favorieten":"Voeg toe aan favorieten",children:s.jsx(p,{size:20,className:se?"fill-red-500":""})})]})]}),s.jsxs("div",{className:"container mx-auto px-4 -mt-8 relative z-10 grid md:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"md:col-span-2 space-y-8",children:[s.jsxs(t,{className:"p-8",children:[s.jsx("div",{className:"flex justify-between items-start mb-4",children:s.jsxs("h2",{className:"text-xl font-bold",children:["Over ",O.name]})}),s.jsx("p",{className:"text-stone-600 leading-relaxed mb-6",children:O.description}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-6",children:[O.phone&&s.jsxs("a",{href:`tel:${O.phone}`,className:"flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border border-stone-200 text-stone-700 font-medium hover:bg-stone-50 hover:text-stone-900 transition-colors",children:[s.jsx(g,{size:18}),"Bellen"]}),O.phone&&s.jsxs("a",{href:(e=>{if(!e)return"#";let s=e.replace(/\D/g,"");return s.startsWith("0")&&(s="31"+s.substring(1)),`https://wa.me/${s}`})(O.phone),target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border border-green-200 text-green-700 bg-green-50 font-medium hover:bg-green-100 transition-colors",children:[s.jsx(b,{size:18}),"WhatsApp"]}),O.email&&s.jsxs("a",{href:`mailto:${O.email}`,className:"flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border border-stone-200 text-stone-700 font-medium hover:bg-stone-50 hover:text-stone-900 transition-colors",children:[s.jsx(f,{size:18}),"Mailen"]})]}),s.jsxs("div",{className:"pt-6 border-t border-stone-100 grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-stone-900 mb-2",children:"Adres"}),s.jsxs("p",{className:"text-stone-500",children:[O.address,s.jsx("br",{}),O.zipCode," ",O.city]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-stone-900 mb-3 flex items-center",children:[s.jsx(v,{className:"mr-2",size:16}),"Openingstijden"]}),s.jsx("div",{className:"space-y-2",children:(()=>{const e=O.openingHours||{},t=["Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag","Zondag"];return["ma","di","wo","do","vr","za","zo"].map((n,a)=>{const i=e[n],r=null==i?void 0:i.closed;return s.jsxs("div",{className:"flex justify-between items-center py-1",children:[s.jsx("span",{className:"text-sm font-medium "+(r?"text-stone-400":"text-stone-700"),children:t[a]}),s.jsx("span",{className:"text-sm "+(r?"text-stone-400 italic":"text-stone-600"),children:r?"Gesloten":`${(null==i?void 0:i.start)||"09:00"} - ${(null==i?void 0:i.end)||"18:00"}`})]},n)})})()})]})]})]}),s.jsx("div",{id:"services-list",children:(()=>{const e=O.services.reduce((e,s)=>{const t=s.category;return e[t]||(e[t]=[]),e[t].push(s),e},{});return Object.entries(e).map(([e,a])=>s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-xl font-bold mb-4 px-2",children:e}),s.jsx("div",{className:"space-y-4",children:a.map(e=>s.jsxs(t,{className:"p-4 md:p-6 flex justify-between items-center hover:border-brand-200 transition-colors",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-stone-900 text-lg",children:e.name}),s.jsx("p",{className:"text-sm text-stone-500 mb-2",children:e.description}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-stone-500",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(v,{size:14,className:"mr-1"})," ",e.durationMinutes," min"]}),s.jsxs("span",{className:"flex items-center font-medium text-stone-900",children:[s.jsx(j,{size:14,className:"mr-1"})," ",e.price]})]})]}),s.jsx(n,{onClick:()=>{return s=e.id,F(s),W("time"),void pe();var s},variant:q===e.id?"primary":"outline",children:"Boeken"})]},e.id))})]},e))})()}),s.jsxs(t,{className:"p-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-xl font-bold",children:["Reviews (",G.length,")"]}),s.jsx(n,{variant:"secondary",size:"sm",onClick:()=>{const e=localStorage.getItem("currentUser"),s=e?JSON.parse(e):null;Q({name:(null==s?void 0:s.name)||"",rating:0,text:""}),Z(!0)},children:"Schrijf een review"})]}),s.jsx("div",{className:"space-y-6",children:0===G.length?s.jsx("div",{className:"text-stone-500 text-sm",children:"Nog geen reviews. Wees de eerste!"}):G.map(e=>s.jsxs("div",{className:"border-b border-stone-100 last:border-0 pb-6 last:pb-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"font-semibold",children:e.user}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((t,n)=>s.jsx(h,{size:14,className:n<e.rating?"fill-current":"text-stone-200"},n))}),s.jsx("button",{onClick:()=>(async e=>{if(T)try{const{error:s}=await l.from("reviews").update({is_flagged:!0,flagged_reason:"Gerapporteerd door gebruiker"}).eq("id",e);if(s)throw s;alert("Review gerapporteerd. Een moderator zal deze beoordelen.")}catch(s){alert("Er ging iets mis bij het rapporteren.")}else alert("Log in om een review te rapporteren.")})(e.id),className:"text-xs text-stone-400 hover:text-red-500 transition-colors",title:"Review rapporteren",children:"ðŸš©"})]})]}),s.jsxs("p",{className:"text-stone-600 text-sm",children:['"',e.text,'"']})]},e.id))})]})]}),s.jsx("div",{className:"relative",children:s.jsxs("div",{className:"sticky top-24",id:"booking-widget",children:[s.jsxs(t,{className:"p-6 border-brand-100 shadow-lg transition-all duration-300",children:[s.jsx("h3",{className:"text-lg font-bold mb-4 border-b border-stone-100 pb-2",children:"Je afspraak"}),"service"===R&&s.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("h4",{className:"font-semibold text-stone-900 mb-2",children:"Kies een dienst"}),s.jsx("p",{className:"text-sm text-stone-500",children:"Alle beschikbare diensten"})]}),s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:null==(z=null==O?void 0:O.services)?void 0:z.map(e=>s.jsx("button",{onClick:()=>{F(e.id),W("time"),pe()},className:"w-full p-4 border-2 border-stone-200 rounded-xl hover:border-brand-300 hover:bg-brand-50 transition-colors text-left",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-stone-900",children:e.name}),s.jsxs("p",{className:"text-sm text-stone-500 mt-1 flex items-center",children:[s.jsx(v,{size:12,className:"mr-1"})," ",e.durationMinutes," min"]})]}),s.jsxs("span",{className:"font-bold text-stone-700",children:["â‚¬",e.price]})]})},e.id))})]}),"time"===R&&q&&s.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[s.jsxs("div",{className:"bg-stone-50 p-4 rounded-xl border border-stone-200 flex justify-between items-start animate-fadeIn",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-stone-900",children:null==me?void 0:me.name}),s.jsxs("p",{className:"text-xs text-stone-500 mt-1",children:[null==me?void 0:me.durationMinutes," min"]})]}),s.jsxs("span",{className:"font-bold text-stone-700",children:["â‚¬",null==me?void 0:me.price]})]}),q&&"time"===R&&s.jsxs("div",{className:"animate-fadeIn",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("button",{onClick:()=>ge(-1),className:"p-1 hover:bg-stone-100 rounded-full",children:s.jsx(N,{size:20})}),s.jsx("span",{className:"font-semibold text-stone-800 capitalize",children:ne.toLocaleString("nl-NL",{month:"long",year:"numeric"})}),s.jsx("button",{onClick:()=>ge(1),className:"p-1 hover:bg-stone-100 rounded-full",children:s.jsx(w,{size:20})})]}),s.jsxs("div",{className:"grid grid-cols-7 text-center text-xs text-stone-400 font-medium mb-2",children:[s.jsx("div",{children:"Ma"}),s.jsx("div",{children:"Di"}),s.jsx("div",{children:"Wo"}),s.jsx("div",{children:"Do"}),s.jsx("div",{children:"Vr"}),s.jsx("div",{children:"Za"}),s.jsx("div",{children:"Zo"})]}),s.jsxs("div",{className:"grid grid-cols-7 gap-1 mb-6",children:[[...Array((e=>{let s=new Date(e.getFullYear(),e.getMonth(),1).getDay();return 0===s?6:s-1})(ne))].map((e,t)=>s.jsx("div",{className:"h-9"},`empty-${t}`)),[...Array((je=ne,new Date(je.getFullYear(),je.getMonth()+1,0).getDate()))].map((e,t)=>{const n=t+1,a=new Date(ne.getFullYear(),ne.getMonth(),n),i=ie&&(l=a,(r=ie).getDate()===l.getDate()&&r.getMonth()===l.getMonth()&&r.getFullYear()===l.getFullYear());var r,l;const o=be(a),d=!fe(a),c=(e=>{if(!O)return!1;let s=[];if(null==O?void 0:O.openingHours){const t=["zo","ma","di","wo","do","vr","za"][e.getDay()],n=O.openingHours[t];if(n&&!n.closed){const e=[],[t,a]=n.start.split(":").map(Number),[i,r]=n.end.split(":").map(Number);let l=t,o=a;for(;l<i||l===i&&o<r;){const s=`${String(l).padStart(2,"0")}:${String(o).padStart(2,"0")}`;e.push(s),o+=5,o>=60&&(o%=60,l+=1)}s=e}}else s=ue;const t=Number((null==O?void 0:O.leadTimeHours)||0),n=new Date((new Date).getTime()+60*t*60*1e3),a=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=new Date(n.getFullYear(),n.getMonth(),n.getDate());if(t>0&&a<i)return!1;let r=s;if(t>0&&a.getTime()===i.getTime()){const e=60*n.getHours()+n.getMinutes();r=r.filter(s=>{const[t,n]=s.split(":").map(Number);return 60*t+n>=e})}const l=xe(e),o=Y.filter(e=>e.date===l),d=e=>{if(!e||"string"!=typeof e)return-1;const s=e.split(":").map(Number);if(s.length<2||s.some(isNaN))return-1;const[t,n]=s;return 60*t+n},c=(null==me?void 0:me.durationMinutes)??30,m=(e,s)=>{const t=d(e);if(t<0)return!0;const n=t+s;return o.some(e=>{const s=d(e.time);if(s<0)return!1;const a=s+(e.duration_minutes||30);return t<a&&n>s})};for(const x of r)if(!m(x,c))return!0;return!1})(a),m=o||d||!c;return s.jsx("button",{disabled:m,onClick:()=>{re(a),oe(null)},className:"h-9 w-9 rounded-full flex items-center justify-center text-sm transition-all "+(i?"bg-brand-500 text-white font-bold shadow-md":m?"text-stone-300 cursor-not-allowed":"text-stone-700 hover:bg-brand-50 hover:text-brand-600"),children:n},n)})]}),ie&&s.jsxs("div",{className:"border-t border-stone-100 pt-4 animate-fadeIn",children:[s.jsx("p",{className:"text-sm font-medium text-stone-700 mb-3",children:"Tijdstip:"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:he.map(e=>s.jsx("button",{onClick:()=>oe(e),className:"py-2 text-sm rounded-lg border transition-colors "+(le===e?"bg-brand-400 text-white border-brand-400 font-medium":"border-stone-200 text-stone-600 hover:border-brand-300 hover:bg-brand-50"),children:e},e))})]}),s.jsx(n,{className:"w-full mt-6",onClick:()=>W("payment"),disabled:!ie||!le,children:"Verder naar betaling"})]})]})]}),"payment"===R&&q&&s.jsxs(t,{className:"p-6 border-brand-100 shadow-lg transition-all duration-300 mt-4",children:[s.jsx("h3",{className:"text-lg font-bold mb-4 border-b border-stone-100 pb-2",children:"Betaalmethode kiezen"}),s.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[s.jsx("p",{className:"text-stone-600 text-sm",children:"Kies hoe je wilt betalen voor je afspraak."}),s.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[(null==(D=null==O?void 0:O.paymentMethods)?void 0:D.cash)&&s.jsx("button",{onClick:()=>ce("cash"),className:"p-4 border-2 rounded-xl text-left transition-all duration-200 "+("cash"===de?"border-brand-500 bg-brand-50 text-brand-700":"border-stone-200 hover:border-stone-300 bg-white"),children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-4 h-4 rounded-full border-2 flex items-center justify-center "+("cash"===de?"border-brand-500":"border-stone-300"),children:"cash"===de&&s.jsx("div",{className:"w-2 h-2 bg-brand-500 rounded-full"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Contant betalen"}),s.jsx("div",{className:"text-sm text-stone-500",children:"Betaal ter plekke bij aankomst"})]})]})}),(null==(M=null==O?void 0:O.paymentMethods)?void 0:M.online)&&s.jsx("button",{onClick:()=>ce("online"),className:"p-4 border-2 rounded-xl text-left transition-all duration-200 "+("online"===de?"border-brand-500 bg-brand-50 text-brand-700":"border-stone-200 hover:border-stone-300 bg-white"),children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-4 h-4 rounded-full border-2 flex items-center justify-center "+("online"===de?"border-brand-500":"border-stone-300"),children:"online"===de&&s.jsx("div",{className:"w-2 h-2 bg-brand-500 rounded-full"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Online betalen"}),s.jsx("div",{className:"text-sm text-stone-500",children:"Veilig betalen met creditcard"})]})]})})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsxs(n,{variant:"outline",onClick:()=>W("time"),className:"flex-1",children:[s.jsx(N,{className:"w-4 h-4 mr-2"}),"Terug"]}),s.jsx(n,{className:"flex-1",onClick:()=>W("confirm"),disabled:!de,children:"Verder naar bevestiging"})]})]})]}),"confirm"===R&&q&&s.jsxs(t,{className:"p-6 border-brand-100 shadow-lg transition-all duration-300 mt-4",children:[s.jsx("h3",{className:"text-lg font-bold mb-4 border-b border-stone-100 pb-2",children:"Bevestig je afspraak"}),s.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[s.jsxs("div",{className:"p-4 bg-stone-50 rounded-xl space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-stone-500",children:"Behandeling"}),s.jsx("span",{className:"font-medium text-stone-900",children:null==me?void 0:me.name})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-stone-500",children:"Datum"}),s.jsx("span",{className:"font-medium text-stone-900",children:ie&&(e=>new Intl.DateTimeFormat("nl-NL",{weekday:"short",day:"numeric",month:"long"}).format(e))(ie)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-stone-500",children:"Tijd"}),s.jsx("span",{className:"font-medium text-stone-900",children:le})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-stone-500",children:"Betaalmethode"}),s.jsx("span",{className:"font-medium text-stone-900",children:"cash"===de?"Contant":"Online"})]}),s.jsxs("div",{className:"border-t border-stone-200 pt-2 flex justify-between font-bold text-base",children:[s.jsx("span",{children:"Totaal"}),s.jsxs("span",{children:["â‚¬",null==me?void 0:me.price]})]})]}),s.jsx(n,{className:"w-full",onClick:async()=>{if(!T)return alert("Log eerst in om te boeken"),void C("/login");V(!0);try{const e=(null==me?void 0:me.durationMinutes)??30,s={user_id:(null==T?void 0:T.id)||null,salon_id:O.supabaseId,service_id:q,service_name:null==me?void 0:me.name,date:ie?xe(ie):null,time:le,duration_minutes:e,price:null==me?void 0:me.price,status:"confirmed",payment_method:de,payment_status:"pending"},{insertAppointmentSafe:t}=await a(async()=>{const{insertAppointmentSafe:e}=await import("./appointments-CxSzwn1D.js");return{insertAppointmentSafe:e}},__vite__mapDeps([0,1,2,3,4])),{error:n}=await t(s);if(n)throw n;alert("Boeking succesvol!"),C("/dashboard/user")}catch(e){alert("Boeking mislukt: "+(e.message||"Onbekende fout"))}finally{V(!1)}},isLoading:$,children:"Bevestig Boeking"}),s.jsx("button",{className:"w-full text-center text-xs text-stone-400 hover:text-stone-600 underline",onClick:()=>{W("time")},children:"Wijzig datum of tijd"})]})]}),s.jsxs("div",{className:"mt-4 flex justify-center gap-4 text-xs text-stone-400",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(y,{size:12,className:"mr-1"})," Gratis annuleren"]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(y,{size:12,className:"mr-1"})," Betaal in salon"]})]})]})})]})]}),s.jsx(i,{isOpen:P,onClose:()=>Z(!1),title:"Schrijf een review",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-sm text-stone-500 mb-4",children:["Wat vond je van je ervaring bij ",s.jsx("span",{className:"font-semibold text-stone-900",children:null==O?void 0:O.name}),"?"]}),s.jsx("div",{className:"flex justify-center gap-2 mb-4",children:[1,2,3,4,5].map(e=>s.jsx("button",{type:"button",className:"focus:outline-none transition-transform hover:scale-110",onClick:()=>Q({...U,rating:e}),onMouseEnter:()=>ee(e),onMouseLeave:()=>ee(0),children:s.jsx(h,{size:32,className:(e<=(X||U.rating)?"fill-yellow-400 text-yellow-400":"text-stone-300")+" transition-colors"})},e))}),s.jsx(r,{label:"Jouw naam",value:U.name,onChange:e=>Q({...U,name:e.target.value}),placeholder:"Naam"}),s.jsxs("div",{className:"w-full",children:[s.jsx("label",{className:"mb-2 block text-sm font-medium text-stone-700",children:"Jouw ervaring"}),s.jsx("textarea",{className:"w-full rounded-xl border border-stone-200 bg-white px-3 py-2 text-sm focus:ring-2 focus:ring-brand-400 focus:outline-none min-h-[100px]",value:U.text,onChange:e=>Q({...U,text:e.target.value}),placeholder:"Vertel ons wat je ervan vond..."})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[s.jsx(n,{variant:"outline",onClick:()=>Z(!1),children:"Annuleren"}),s.jsx(n,{onClick:async()=>{if(0!==U.rating)if(U.name&&U.text)if(T)try{const e={salon_id:O.supabaseId||O.id,user_id:T.id,rating:U.rating,comment:U.text,text:U.text},{insertReviewSafe:s}=await a(async()=>{const{insertReviewSafe:e}=await import("./reviews-BR7FZGZe.js");return{insertReviewSafe:e}},__vite__mapDeps([5,1,2,3,4])),{error:t,data:n}=await s(e);if(t){const e=(null==t?void 0:t.message)||(null==t?void 0:t.msg)||JSON.stringify(t)||"Onbekende fout";return void alert(`Er ging iets mis bij het opslaan van je review: ${e}`)}const i={id:n.id,user:U.name,text:U.text,rating:U.rating,created_at:n.created_at};K(e=>[i,...e]),Z(!1),Q({name:"",rating:0,text:""}),alert("Bedankt voor je review!")}catch(e){alert("Er ging iets mis. Probeer het opnieuw.")}else alert("Log in om een review te plaatsen.");else alert("Vul alstublieft alle velden in.");else alert("Selecteer alstublieft een aantal sterren.")},children:"Plaats Review"})]})]})})]});var je};export{k as SalonDetailPage};
