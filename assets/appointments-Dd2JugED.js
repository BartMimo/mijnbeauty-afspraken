import{s as r}from"./dashboards-BzIxZDf7.js";import"./vendor-BLPh2XG4.js";import"./ui-Dc2VBgM7.js";import"./supabase-wzm6nDUs.js";async function t(t){const e=async t=>{const e={...t};return e.time&&"string"==typeof e.time&&(e.time=e.time),await r.from("appointments").insert([e])};try{const{error:r,data:n}=await e(t);if(r){const n=r.message||r.msg||JSON.stringify(r);if(n.includes("Could not find the 'service_name'")||n.includes("service_name")){const{service_name:r,serviceName:n,...s}=t;return await e(s)}const s=n.match(/Could not find the '([a-zA-Z0-9_]+)' column/);if(s){const r=s[1],{[r]:n,...a}=t;return await e(a)}return{error:r}}return{error:null,data:n}}catch(n){const e=n&&(n.message||n.msg||JSON.stringify(n))||"";if(e.includes("Could not find the 'service_name'")||e.includes("service_name")){const{service_name:e,serviceName:n,...a}=t;try{const{error:t,data:e}=await r.from("appointments").insert([a]);return{error:t,data:e}}catch(s){return{error:s}}}const o=e.match(/Could not find the '([a-zA-Z0-9_]+)' column/);if(o){const e=o[1],{[e]:n,...s}=t;try{const{error:t,data:e}=await r.from("appointments").insert([s]);return{error:t,data:e}}catch(a){return{error:a}}}return{error:n}}}export{t as insertAppointmentSafe};
